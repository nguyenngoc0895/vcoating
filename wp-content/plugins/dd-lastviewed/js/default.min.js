!function(s){function e(){var t=s(".editwidget");t.length&&(t.find(".js-types-and-terms").select2({width:"100%",containerCssClass:"ddlv-types-and-terms"}),t.find(".js-exclude-ids").select2({tags:!0,tokenSeparators:[","," "],width:"100%",containerCssClass:"ddlv-exclude-ids",maximumSelectionLength:0,dropdownCss:{display:"none"},createTag:function(t){return isNaN(t.term)?null:{id:t.term,text:t.term}}}));s(".widget[id*='dd_last_viewed-']").each(function(){var t=s(this).find(".js-types-and-terms"),e=s(this).attr("id").split("-"),n=s(this).find(".js-exclude-ids");e=e[2],t.data("select2")||"__i__"===e||(t.select2({width:"100%",containerCssClass:"ddlv-types-and-terms"}),n.select2({tags:!0,tokenSeparators:[","," "],width:"100%",containerCssClass:"ddlv-exclude-ids",maximumSelectionLength:0,dropdownCss:{display:"none"},createTag:function(t){return isNaN(t.term)?null:{id:t.term,text:t.term}}}))})}s(document).ready(function(){e(),s(document).on("keypress",".exclude_ids .select2-search__field",function(t){s(this).val(s(this).val().replace(/[^\d].+/,"")),(isNaN(t.key)&&","!==t.key||!s(this).val()&&","===t.key)&&t.preventDefault()});var t=s(".button-primary").css("background-color");s(document).on("hover",".select2-results__option--highlighted[aria-selected]",function(){s(".select2-results__option").removeAttr("style"),s(this).css("background-color",t)})}),s(document).on("widget-updated widget-added",function(){e()}),s(document).on("click",".dd-switch",function(){if(s(this).toggleClass("on"),s(this).next("input").trigger("click"),!s(this).hasClass("on")){var t=s(this).parent().parent().find(".lv_link.button-primary");t.length&&t.trigger("click")}0<s(this).next('[id*="lastViewed_showExcerpt"]').length&&s(this).parent().parent().next(".contentSettings").toggleClass("hidden"),0<s(this).next('[id*="advanced_cookie_settings_checked"]').length&&s(this).parent().parent().next(".contentSettings").toggleClass("hidden"),0<s(this).next('[id*="avoid_widget_caching_checked"]').length&&s(this).parent().parent().next(".contentSettings").toggleClass("hidden")}),s(document).on("click",".lv_link",function(){var t=s(this).parent().parent().find(".dd-switch");s(this).toggleClass("button-primary"),s(this).next("input").trigger("click"),s(this).hasClass("button-primary")&&!t.hasClass("on")&&t.trigger("click")}),s(document).on("click",".js-collapse",function(t){t.preventDefault(),s(this).next().toggleClass("visible")})}(jQuery);